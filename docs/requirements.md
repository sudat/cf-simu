# 要件定義書

## 1. プロジェクト概要

### 1.1 目的
個人の長期的なキャッシュフロー（収入、支出、資産、負債）を手軽にシミュレーションし、将来の財務状況を視覚的に把握するためのモバイルファーストなWebアプリケーションを開発する。

### 1.2 ターゲットユーザー
- 自身の資産形成やライフプランニングに関心がある個人・世帯。
- スマートフォンで手軽に財務状況を確認・計画したいユーザー。

### 1.3 コンセプト
- **直感的なUI/UX**: Glassmorphismを取り入れたモダンなデザインと、インタラクティブなグラフ表示で、複雑な財務データを分かりやすく提示する。
- **柔軟なシナリオ設定**: 収入や支出の項目ごとに複数の「プラン（シナリオ）」を設定でき、それらを切り替えることで様々な未来予測を簡単に比較検討できる。
- **ローカル完結**: サーバーやユーザー登録を必要とせず、すべてのデータをブラウザのローカルストレージに保存。プライバシーと手軽さを両立する。

## 2. 機能要件

### 2.1 ダッシュボード (F001)
- 収支と資産・負債の推移を、期間（5〜50年）を切り替えてグラフで確認できる。
- グラフは収入と支出、資産と負債をそれぞれ対比させた「鏡面グラフ」で表示し、バランスを直感的に理解しやすくする。

### 2.2 推移分析 (F002)
- シミュレーション結果を年ごとの詳細な数値テーブルで表示する。
- 収入、支出、資産、負債のカテゴリごとに項目と合計値を表示し、折りたたみ機能で詳細を確認できる。
- 純収支（年間）と純資産（年末）を計算し表示する。

### 2.3 収支項目管理 (F003)
- 「収入」「支出」「資産」「負債」の4つのカテゴリで、ユーザーが自由に項目を追加・管理できる。
- 各項目に対して、金額や期間、変動率を詳細に設定できる (F004)。
- 各項目に対して、複数のシナリオ（プラン）を設定・管理できる (F005)。

### 2.4 金額設定 (F004)
- **フロー項目（収入・支出）**: 開始/終了年度、月額/年額、金額、年間の増減率を設定できる。
- **ストック項目（資産・負債）**: 基準となる年度の金額、その後の年率増減、および定額の年間増減（積立・取崩し）を設定できる。
- 設定内容がどのように計算に反映されるか、リアルタイムで計算例を表示する。

### 2.5 プラン管理 (F005)
- 項目ごとに複数のプラン（例: 「コンサバプラン」「積極投資プラン」）を作成・管理できる。
- シミュレーションに使用するプランを項目ごとに選択できる。

## 3. 非機能要件

### 3.1 ユーザビリティ
- **モバイルファースト**: スマートフォンの画面サイズに最適化されたレイアウトと操作性を提供する。
- **視覚的フィードバック**: グラフや数値が設定変更に応じて即座に更新され、インタラクティブな体験を提供する。

### 3.2 パフォーマンス
- 設定変更後のシミュレーション再計算とUI更新は、1秒以内に完了することを目指す。
- 50年分の計算をスムーズに処理する。

### 3.3 データ永続性
- 全てのデータはブラウザのローカルストレージに保存され、ユーザーがデータをクリアしない限り維持される。

### 3.4 技術スタック
- **フレームワーク**: Next.js (App Router)
- **UI**: Tailwind CSS, shadcn/ui, Lucide Icons
- **状態管理**: Zustand (または同等の軽量ライブラリ)
- **グラフ**: D3.js, Recharts, またはSVGで直接描画

## 4. MVP（Minimum Viable Product）の範囲

- 上記の機能要件 (F001〜F005) をすべて満たすこと。
- データ共有機能、ユーザー認証、クラウド同期はMVPの範囲外とする。
- 複雑な税金計算やインフレ率の自動調整機能は含めない。
