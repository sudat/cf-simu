# Requirements Document

## Introduction

現在の収支項目管理画面では、新しい項目を追加することはできますが、一度作成した項目を削除やリネームする機能がありません。ユーザビリティを向上させるため、各収支項目に対して削除・リネーム機能を追加し、項目管理をより柔軟に行えるようにします。

## Requirements

### Requirement 1

**User Story:** ユーザーとして、不要になった収支項目を削除したい。そうすることで、項目リストを整理し、必要な項目のみを管理できる。

#### Acceptance Criteria

1. WHEN 収支項目の右側に削除ボタン（ゴミ箱アイコン）が表示される THEN ユーザーがクリックできる SHALL
2. WHEN 削除ボタンをクリックする THEN 確認ダイアログが表示される SHALL
3. WHEN 確認ダイアログで「削除」を選択する THEN 項目が完全に削除される SHALL
4. WHEN 項目が削除される THEN その項目に関連する過去のデータも全て削除される SHALL

### Requirement 2

**User Story:** ユーザーとして、収支項目の名前を変更したい。そうすることで、より適切な名前に修正し、項目を分かりやすく管理できる。

#### Acceptance Criteria

1. WHEN 収支項目の右側にリネームボタン（鉛筆アイコン）が表示される THEN ユーザーがクリックできる SHALL
2. WHEN リネームボタンをクリックする THEN 項目名がインライン編集モードになる SHALL
3. WHEN インライン編集で新しい名前を入力してEnterキーを押す THEN 項目名が更新される SHALL
4. WHEN インライン編集でEscキーを押すまたは他の場所をクリックする THEN 編集がキャンセルされる SHALL

### Requirement 3

**User Story:** ユーザーとして、削除操作を誤って実行することを防ぎたい。そうすることで、重要なデータを誤って失うリスクを回避できる。

#### Acceptance Criteria

1. WHEN 削除ボタンをクリックする THEN 「この項目を削除しますか？関連するデータも全て削除されます。」という確認メッセージが表示される SHALL
2. WHEN 確認ダイアログで「キャンセル」を選択する THEN 削除処理が中止される SHALL
3. WHEN 確認ダイアログで「削除」を選択する THEN 項目とデータが削除される SHALL
4. WHEN 削除が完了する THEN 成功メッセージまたは項目リストの更新が表示される SHALL

### Requirement 4

**User Story:** ユーザーとして、リネーム操作が直感的で使いやすいことを期待する。そうすることで、スムーズに項目名を変更できる。

#### Acceptance Criteria

1. WHEN インライン編集モードになる THEN 現在の項目名がテキストフィールドに表示される SHALL
2. WHEN テキストフィールドにフォーカスが当たる THEN 既存のテキストが全選択される SHALL
3. WHEN 空の名前で保存しようとする THEN エラーメッセージが表示され保存されない SHALL
4. WHEN 既存の項目名と同じ名前で保存しようとする THEN 重複エラーメッセージが表示される SHALL

### Requirement 5

**User Story:** 開発者として、削除・リネーム機能が既存のシステムと整合性を保つことを確認したい。そうすることで、データの整合性とシステムの安定性を維持できる。

#### Acceptance Criteria

1. WHEN 項目を削除する THEN プラン管理システムからも該当項目の情報が削除される SHALL
2. WHEN 項目をリネームする THEN プラン管理システムでも項目名が更新される SHALL
3. WHEN 削除・リネーム操作を実行する THEN 他の機能（計算、表示など）に影響しない SHALL
4. WHEN 操作が完了する THEN ローカルストレージのデータも適切に更新される SHALL

### Requirement 6

**User Story:** ユーザーとして、削除・リネームボタンが適切に配置され、視覚的に分かりやすいことを期待する。そうすることで、必要な操作を迷わず実行できる。

#### Acceptance Criteria

1. WHEN 収支項目を表示する THEN 各項目の右側に削除・リネームボタンが配置される SHALL
2. WHEN ボタンにマウスオーバーする THEN ツールチップで機能説明が表示される SHALL
3. WHEN ボタンのサイズとスタイル THEN 既存のUIデザインと統一感がある SHALL
4. WHEN モバイル表示の場合 THEN ボタンがタップしやすいサイズで表示される SHALL